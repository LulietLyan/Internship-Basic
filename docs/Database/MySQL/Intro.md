---
statistics: true
comments: true
---

<style>
body {
  position: relative; /* ç¡®ä¿ body å…ƒç´ çš„ position å±æ€§ä¸ºéé™æ€å€¼ */
}

body::before {
  --size: 35px; /* è°ƒæ•´ç½‘æ ¼å•å…ƒå¤§å° */
  --line: color-mix(in hsl, canvasText, transparent 80%); /* è°ƒæ•´çº¿æ¡é€æ˜åº¦ */
  content: '';
  height: 100vh;
  width: 100%;
  position: absolute; /* ä¿®æ”¹ä¸º absolute ä»¥ä½¿å…¶éšé¡µé¢æ»šåŠ¨ */
  background: linear-gradient(
        90deg,
        var(--line) 1px,
        transparent 1px var(--size)
      )
      50% 50% / var(--size) var(--size),
    linear-gradient(var(--line) 1px, transparent 1px var(--size)) 50% 50% /
      var(--size) var(--size);
  -webkit-mask: linear-gradient(-20deg, transparent 50%, white);
          mask: linear-gradient(-20deg, transparent 50%, white);
  top: 0;
  transform-style: flat;
  pointer-events: none;
  z-index: -1;
}

@media (max-width: 768px) {
  body::before {
    display: none; /* åœ¨æ‰‹æœºç«¯éšè—ç½‘æ ¼æ•ˆæœ */
  }
}
</style>

# ğŸ”´ æ¦‚è¿°

## å…³ç³»çš„ä¸‰ä¸ªèŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ

- **ç¬¬ä¸€èŒƒå¼(1NF)**ï¼šç”¨æ¥ç¡®ä¿æ¯åˆ—çš„åŸå­æ€§ï¼Œè¦æ±‚æ¯åˆ—(æˆ–è€…æ¯ä¸ªå±æ€§å€¼)éƒ½æ˜¯ä¸å¯å†åˆ†çš„æœ€å°æ•°æ®å•å…ƒ(ä¹Ÿç§°ä¸ºæœ€å°çš„åŸå­å•å…ƒ)

- **ç¬¬äºŒèŒƒå¼(2NF)**ï¼šåœ¨ç¬¬ä¸€èŒƒå¼çš„åŸºç¡€ä¸Šæ›´è¿›ä¸€å±‚ï¼Œè¦æ±‚è¡¨ä¸­çš„æ¯åˆ—éƒ½å’Œä¸»é”®ç›¸å…³ï¼Œå³è¦æ±‚å®ä½“çš„å”¯ä¸€æ€§ã€‚å¦‚æœä¸€ä¸ªè¡¨æ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼Œå¹¶ä¸”é™¤äº†ä¸»é”®ä»¥å¤–çš„å…¶ä»–åˆ—å…¨éƒ¨éƒ½ä¾èµ–äºè¯¥ä¸»é”®ï¼Œé‚£ä¹ˆè¯¥è¡¨æ»¡è¶³ç¬¬äºŒèŒƒå¼

- **ç¬¬ä¸‰èŒƒå¼(3NF)**ï¼šåœ¨ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Šæ›´è¿›ä¸€å±‚ï¼Œç¬¬ä¸‰èŒƒå¼æ˜¯ç¡®ä¿æ¯åˆ—éƒ½å’Œä¸»é”®åˆ—ç›´æ¥ç›¸å…³ï¼Œè€Œä¸æ˜¯é—´æ¥ç›¸å…³ï¼Œå³é™åˆ¶åˆ—çš„å†—ä½™æ€§ã€‚å¦‚æœä¸€ä¸ªå…³ç³»æ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼Œå¹¶ä¸”é™¤äº†ä¸»é”®ä»¥å¤–çš„å…¶ä»–åˆ—éƒ½ä¾èµ–äºä¸»é”®åˆ—ï¼Œåˆ—å’Œåˆ—ä¹‹é—´ä¸å­˜åœ¨ç›¸äº’ä¾èµ–å…³ç³»ï¼Œåˆ™æ»¡è¶³ç¬¬ä¸‰èŒƒå¼

## MySQL ä¸­ varchar å’Œ char çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

- char å­—æ®µçš„æœ€å¤§é•¿åº¦ä¸º 255 å­—ç¬¦ï¼Œvarchar å­—æ®µçš„æœ€å¤§é•¿åº¦ä¸º 65535 ä¸ªå­—ç¬¦
- char ç±»å‹å¦‚æœå­˜çš„æ•°æ®é‡å°äºæœ€å¤§é•¿åº¦ï¼Œå‰©ä½™çš„ç©ºé—´ä¼šä½¿ç”¨ç©ºæ ¼å¡«å……ï¼Œå› æ­¤å¯èƒ½ä¼šæµªè´¹ç©ºé—´ï¼Œæ‰€ä»¥ char ç±»å‹é€‚åˆå­˜å‚¨é•¿åº¦å›ºå®šçš„æ•°æ®ï¼Œè¿™æ ·ä¸ä¼šæµªè´¹ç©ºé—´ï¼Œæ•ˆç‡è¿˜æ¯” varchar ç•¥é«˜ï¼›varchar ç±»å‹å¦‚æœå­˜åˆ°æ•°æ®é‡å°äºæœ€å¤§é•¿åº¦ï¼Œå‰©ä½™çš„ç©ºé—´ä¼šç•™ç»™åˆ«çš„æ•°æ®ä½¿ç”¨ï¼Œæ‰€ä»¥ varchar ç±»å‹é€‚åˆå­˜å‚¨é•¿åº¦ä¸å›ºå®šçš„æ•°æ®ï¼Œè¿™æ ·è™½ç„¶æ²¡æœ‰ char å­˜å‚¨æ•ˆç‡é«˜ï¼Œä½†è‡³å°‘ä¸ä¼šæµªè´¹ç©ºé—´
- char ç±»å‹çš„æŸ¥æ‰¾æ•ˆç‡é«˜ï¼Œvarchar ç±»å‹çš„æŸ¥æ‰¾æ•ˆç‡è¾ƒä½

## join å’Œ left join çš„åŒºåˆ«ï¼Ÿ

- join ç­‰ä»·äº inner join å†…è¿æ¥ï¼Œæ˜¯è¿”å›ä¸¤ä¸ªè¡¨ä¸­éƒ½æœ‰çš„ç¬¦åˆæ¡ä»¶çš„è¡Œ

- left join å·¦è¿æ¥ï¼Œæ˜¯è¿”å›å·¦è¡¨ä¸­æ‰€æœ‰çš„è¡ŒåŠå³è¡¨ä¸­ç¬¦åˆæ¡ä»¶çš„è¡Œ

- right join å³è¿æ¥ï¼Œæ˜¯è¿”å›å³è¡¨ä¸­æ‰€æœ‰çš„è¡ŒåŠå·¦è¡¨ä¸­ç¬¦åˆæ¡ä»¶çš„è¡Œ

## SQL æ€ä¹ˆå®ç°æ¨¡ç³ŠæŸ¥è¯¢ï¼Ÿ

ç´¢å¼• B+ æ ‘æ˜¯æŒ‰ç…§ç´¢å¼•å€¼æœ‰åºæ’åˆ—å­˜å‚¨çš„ï¼Œåªèƒ½æ ¹æ®å‰ç¼€è¿›è¡Œæ¯”è¾ƒã€‚æ¯ä¸€æ¬¡æŒ‰ç…§æ¨¡ç³ŠåŒ¹é…çš„å‰ç¼€å­—å…¸åºæ¥è¿›è¡Œæ¯”è¾ƒã€‚

## select çš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ

- **è¿æ¥**ï¼šé¦–å…ˆå®¢æˆ·ç«¯å’Œ MySQL é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼ŒMySQL æ˜¯åŸºäº TCP è¿›è¡Œä¼ è¾“çš„ã€‚MySQL æœåŠ¡å¦‚æœæ²¡æœ‰å¯åŠ¨å°±ä¼šæŠ¥é”™ã€‚MySQL æ­£å¸¸è¿è¡Œçš„è¯å°±å»æ ¡éªŒç”¨æˆ·åå’Œå¯†ç ï¼Œå¦‚æœè®¤è¯ä¿¡æ¯é”™è¯¯ä¹Ÿä¼šæŠ¥é”™ã€‚æ£€éªŒé€šè¿‡ä¹‹åè¿æ¥å™¨ä¼šè·å–ç”¨æˆ·æƒé™å¹¶ä¸”ä¿å­˜èµ·æ¥ï¼Œåç»­çš„ä»»ä½•æ“ä½œéƒ½ä¼šåŸºäºå¼€å§‹çš„è¯»åˆ°æƒé™è¿›è¡Œåˆ¤æ–­ï¼Œå³ä¾¿åˆ›å»ºè¿æ¥ä¹‹åæ›´æ”¹äº†æƒé™ä¹Ÿä¸ä¼šå½±å“å·²è¿æ¥çš„æƒé™
  >  **å¦‚ä½•æ–­å¼€é•¿è¿æ¥** 
  >
  > - **å®šæœŸæ–­å¼€é•¿è¿æ¥** 
  > - **å®¢æˆ·ç«¯ä¸»åŠ¨é‡ç½®è¿æ¥**ï¼šå½“å®¢æˆ·ç«¯æ‰§è¡Œäº†ä¸€ä¸ªå¾ˆå¤§çš„æ“ä½œåï¼Œåœ¨ä»£ç é‡Œè°ƒç”¨ mysql_reset_connection å‡½æ•°æ¥é‡ç½®è¿æ¥ï¼Œè¾¾åˆ°é‡Šæ”¾å†…å­˜çš„æ•ˆæœã€‚è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦é‡è¿å’Œé‡æ–°åšæƒé™éªŒè¯ï¼Œä½†æ˜¯ä¼šå°†è¿æ¥æ¢å¤åˆ°åˆšåˆšåˆ›å»ºå®Œæ—¶çš„çŠ¶æ€
- **æŸ¥è¯¢ç¼“å­˜**ï¼šè¿æ¥æˆåŠŸåä¼šå‘ MySQL æœåŠ¡å‘é€ SQL è¯­å¥ï¼ŒMySQL æœåŠ¡æ”¶åˆ°è¯­å¥ä¹‹åä¼šè¿›è¡Œè§£æåˆ¤æ–­ SQL è¯­å¥çš„ç±»å‹ã€‚å¦‚æœæ˜¯ select è¯­å¥çš„è¯å°±å»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œçœ‹çœ‹ä¹‹å‰æœ‰æ²¡æœ‰æ‰§è¡Œè¿‡è¿™æ¡ select è¯­å¥ã€‚ç¼“å­˜æ˜¯ä»¥ k-v å½¢å¼ä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œkey æ˜¯ SQL è¯­å¥ï¼Œvalue æ˜¯ SQL æŸ¥è¯¢ç»“æœã€‚å¦‚æœç¼“å­˜ä¸­æœ‰ç»“æœå°±ç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­å°±ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚æ‰§è¡Œå®Œæˆåçš„ç»“æœä¼šè¢«æ”¾å…¥ç¼“å­˜ä¸­
  >  **ç¼“å­˜ç¼ºç‚¹** 
  >
  > å¯¹äºæ›´æ–°æ¯”è¾ƒé¢‘ç¹çš„è¡¨ï¼ŒæŸ¥è¯¢ç¼“å­˜çš„å‘½ä¸­ç‡å¾ˆä½ï¼Œåªè¦ä¸€ä¸ªè¡¨æœ‰æ›´æ–°æ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨çš„æŸ¥è¯¢ç¼“å­˜å°±ä¼šè¢«æ¸…ç©ºã€‚å¦‚æœåˆšç¼“å­˜äº†ä¸€ä¸ªæŸ¥è¯¢ç»“æœå¾ˆå¤§çš„æ•°æ®ï¼Œè¿˜æ²¡è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œåˆšå¥½è¿™ä¸ªè¡¨æœ‰æ›´æ–°æ“ä½œï¼ŒæŸ¥è¯¢ç¼“å†²å°±è¢«æ¸…ç©ºäº†ã€‚
  >  **MySQL 8.0 ç‰ˆæœ¬ç›´æ¥å°†æŸ¥è¯¢ç¼“å­˜åˆ æ‰äº†**ï¼Œæ‰§è¡Œä¸€æ¡ SQL æŸ¥è¯¢è¯­å¥ï¼Œä¸ä¼šæœ‰æŸ¥è¯¢ç¼“å­˜è¿™ä¸ªé˜¶æ®µäº†
- **SQL è§£æ**ï¼šè¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æï¼Œè¯æ³•åˆ†ææ˜¯æŠŠ SQL è¯­å¥çš„å­—ç¬¦ä¸²è¯†åˆ«å‡ºå…³é”®å­—ï¼Œæ–¹ä¾¿åç»­ä¼˜åŒ–ï¼Œè¯­æ³•åˆ†ææ ¹æ®è¯­æ³•è§„åˆ™åˆ¤æ–­ SQL è¯­å¥æ˜¯å¦æ»¡è¶³è¦æ±‚ã€‚å¦‚æœ SQL è¯­æ³•ä¸æ­£ç¡®å°±ä¼šæŠ¥é”™
- **SQL æ‰§è¡Œ**ï¼šä¸»è¦æ˜¯ prepare é¢„å¤„ç†ã€optimize ä¼˜åŒ–å’Œ execute æ‰§è¡Œé˜¶æ®µ
  - **é¢„å¤„ç†å™¨æ£€æŸ¥ SQL æŸ¥è¯¢çš„è¡¨æˆ–è€…å­—æ®µæ˜¯å¦å­˜åœ¨**ï¼Œå¦‚æœæœ‰å°±å°†å®ƒæ‰©å±•ä¸º SQL çš„æ‰€æœ‰çš„åˆ—
  - **ä¼˜åŒ–å™¨æ˜¯ç¡®å®š SQL è¯­å¥çš„æ‰§è¡Œæ–¹æ¡ˆ**ï¼Œæ¯”æ–¹è¯´æœ‰ç´¢å¼•ä¼šé€‰æ‹©èµ°äº†å“ªä¸ªç´¢å¼•
  - **æ‰§è¡Œå™¨ä¼šä¸å­˜å‚¨å¼•æ“äº¤äº’**ï¼Œå¦‚æœèµ°ç´¢å¼•äº†å°±å°†ç›¸åº”ç´¢å¼•æ¡ä»¶äº¤ç»™å­˜å‚¨å¼•æ“
    - **å­˜å‚¨å¼•æ“é€šè¿‡ B+ æ ‘å®šä½æ•°æ®**ï¼Œå¦‚æœæ•°æ®ä¸å­˜åœ¨å°±åƒæ‰§è¡Œå™¨è¿”å›é”™è¯¯ï¼Œç„¶åæŸ¥è¯¢ç»“æŸï¼›æ‰¾åˆ°äº†å°±å°†è®°å½•è¿”å›ç»™æ‰§è¡Œæ•°ï¼Œæ‰§è¡Œå™¨è¯»åˆ°æ•°æ®ä¹‹ååˆ¤æ–­è®°å½•æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œå¦‚æœæ»¡è¶³è¦æ±‚å°±å°†æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¦åˆ™è·³è¿‡è¯¥æ•°æ®
    - **å…¨è¡¨æ‰«æä¼˜åŒ–å™¨** å’Œå­˜å‚¨å¼•æ“äº¤äº’ä¹‹åå­˜å‚¨å¼•æ“ä¼šè®¿é—®ç¬¬ä¸€æ¡è¡¨ä¸­æ•°æ®ï¼Œæ‰§è¡Œå™¨ä¼šåˆ¤æ–­è¿™æ¡æ•°æ®æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œæ»¡è¶³å°±å‘ç»™å®¢æˆ·ç«¯ã€‚
  - **æ‰§è¡Œå™¨æŸ¥è¯¢æ˜¯ä¸€ä¸ª while å¾ªç¯**ï¼Œç»§ç»­å–ä¸‹ä¸€æ¡è®°å½•é‡å¤åˆ¤æ–­ï¼Œç›´åˆ°è¯»å®Œè¡¨ä¸­æ‰€æœ‰è®°å½•é€€å‡ºå¾ªç¯ã€‚å¦‚æœä½¿ç”¨è”åˆç´¢å¼•ï¼Œä¼šåœ¨å­˜å‚¨å¼•æ“å±‚åˆ†åˆ«åˆ¤æ–­æ¯ä¸ªç´¢å¼•æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œè€Œä¸å…ˆæ‰§è¡Œå›è¡¨ï¼Œæ‰€æœ‰ç´¢å¼•æœ‰ä¸€ä¸ªä¸æˆç«‹å°±è·³è¿‡ï¼›å¦åˆ™å°±è¿”å›ç»™ Server å±‚å›è¡¨ï¼Œè¿™æ˜¯ä¸€ä¸ª **ç´¢å¼•ä¸‹æ¨** çš„è¿‡ç¨‹

## update çš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ

 **æ‰§è¡Œå™¨è´Ÿè´£å…·ä½“æ‰§è¡Œ**ï¼Œä¼šè°ƒç”¨å­˜å‚¨å¼•æ“çš„æ¥å£ï¼Œé€šè¿‡ä¸»é”®ç´¢å¼•æ ‘æœç´¢è·å–ä¸€è¡Œè®°å½•ï¼š

- å¦‚æœè®°å½•æ‰€åœ¨çš„æ•°æ®é¡µæœ¬æ¥å°±åœ¨ buffer pool ä¸­ï¼Œå°±ç›´æ¥è¿”å›ç»™æ‰§è¡Œå™¨æ›´æ–°
- å¦‚æœè®°å½•ä¸åœ¨ buffer poolï¼Œå°†æ•°æ®é¡µä»ç¡¬ç›˜è¯»å…¥åˆ° buffer poolï¼Œè¿”å›è®°å½•ç»™æ‰§è¡Œå™¨

æ‰§è¡Œå™¨å¾—åˆ°èšç°‡ç´¢å¼•è®°å½•åï¼Œä¼š **æ¯”è¾ƒæ›´æ–°å‰çš„è®°å½•å’Œæ›´æ–°åçš„è®°å½•æ˜¯å¦ç›¸åŒ**ï¼š

- å¦‚æœä¸€æ ·å°±ä¸è¿›è¡Œåç»­æ›´æ–°æµç¨‹
- å¦‚æœä¸ä¸€æ ·å°±æŠŠæ›´æ–°å‰çš„è®°å½•å’Œæ›´æ–°åçš„è®°å½•éƒ½å½“ä½œå‚æ•°ä¼ ç»™ InnoDB å±‚ï¼Œè®© InnoDB çœŸæ­£çš„æ‰§è¡Œæ›´æ–°è®°å½•çš„æ“ä½œ
- **å¼€å¯äº‹åŠ¡**ï¼šé¦–å…ˆè¦è®°å½•ç›¸åº”çš„ undo logï¼Œéœ€è¦æŠŠè¢«æ›´æ–°çš„åˆ—çš„æ—§å€¼è®°ä¸‹æ¥ï¼Œä¹Ÿå°±æ˜¯è¦ç”Ÿæˆä¸€æ¡ undo logï¼Œundo log ä¼šå†™å…¥ Buffer Pool ä¸­çš„ Undo é¡µé¢ï¼Œä¸è¿‡åœ¨å†…å­˜ä¿®æ”¹è¯¥ Undo é¡µé¢åï¼Œéœ€è¦è®°å½•å¯¹åº”çš„ redo log

InnoDB å±‚å¼€å§‹æ›´æ–°è®°å½•ï¼Œä¼šå…ˆæ›´æ–°å†…å­˜(åŒæ—¶æ ‡è®°ä¸ºè„é¡µ)ï¼Œç„¶åå°†è®°å½•å†™åˆ° redo log é‡Œé¢ï¼Œè¿™ä¸ªæ—¶å€™æ›´æ–°å°±ç®—å®Œæˆäº†ã€‚ä¸ºäº†å‡å°‘ç¡¬ç›˜ I/Oï¼Œä¸ä¼šç«‹å³å°†è„é¡µå†™å…¥ç¡¬ç›˜ï¼Œåç»­ç”±åå°çº¿ç¨‹é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ—¶æœºå°†è„é¡µå†™å…¥åˆ°ç¡¬ç›˜ã€‚

åœ¨ä¸€æ¡æ›´æ–°è¯­å¥æ‰§è¡Œå®Œæˆåï¼Œç„¶åå¼€å§‹è®°å½•è¯¥è¯­å¥å¯¹åº”çš„ binlogï¼Œæ­¤æ—¶è®°å½•çš„ binlog ä¼šè¢«ä¿å­˜åˆ° binlog cacheï¼Œåœ¨äº‹åŠ¡æäº¤æ—¶æ‰ä¼šç»Ÿä¸€å°†è¯¥äº‹åŠ¡è¿è¡Œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰ binlog åˆ·æ–°åˆ°ç¡¬ç›˜ã€‚

 **ä¸¤é˜¶æ®µæäº¤**ï¼š

- **prepare é˜¶æ®µ**ï¼šå°† redo log å¯¹åº”çš„äº‹åŠ¡çŠ¶æ€è®¾ç½®ä¸º prepareï¼Œç„¶åå°† redo log åˆ·æ–°åˆ°ç¡¬ç›˜ï¼›
- **commit é˜¶æ®µ**ï¼šå°† binlog åˆ·æ–°åˆ°ç¡¬ç›˜ï¼Œæ¥ç€è°ƒç”¨å¼•æ“çš„æäº¤äº‹åŠ¡æ¥å£ï¼Œå°† redo log çŠ¶æ€è®¾ç½®ä¸º commit(å°†äº‹åŠ¡è®¾ç½®ä¸º commit çŠ¶æ€åï¼Œåˆ·å…¥åˆ°ç¡¬ç›˜ redo log æ–‡ä»¶)

## count æ€§èƒ½æ¯”è¾ƒï¼Ÿ

 **count(*) = count(1) > count(ä¸»é”®) > count(å­—æ®µ)** 

MySQL ä¼šå°†æ˜Ÿå·å‚æ•°è½¬åŒ–ä¸ºå‚æ•° 0 æ¥å¤„ç†ï¼Œæ‰€ä»¥ count(*) å’Œ count(1)ç›¸ç­‰ã€‚count(ä¸»é”®)éœ€è¦åˆ¤æ–­ä¸»é”®æ˜¯å¦ä¸ºç©ºå€¼ï¼›count(å­—æ®µ)ä¼šè¿›è¡Œå…¨è¡¨æ‰«æï¼Œæ•ˆç‡æœ€å·®ã€‚

## dropã€truncate å’Œ delete çš„åŒºåˆ«ï¼Ÿ

 **drop åˆ é™¤æ•´å¼ è¡¨å’Œè¡¨ç»“æ„ï¼Œä»¥åŠè¡¨çš„ç´¢å¼•ã€çº¦æŸå’Œè§¦å‘å™¨ï¼›truncate åªåˆ é™¤è¡¨æ•°æ®ï¼Œè¡¨çš„ç»“æ„ã€ç´¢å¼•ã€çº¦æŸç­‰ä¼šè¢«ä¿ç•™ï¼› delete åªåˆ é™¤è¡¨çš„å…¨éƒ¨æˆ–éƒ¨åˆ†æ•°æ®ï¼Œè¡¨ç»“æ„ã€ç´¢å¼•ã€çº¦æŸç­‰ä¼šè¢«ä¿ç•™**ã€‚

- **delete è¯­å¥ä¸º DML(data maintain Language)**ï¼Œæ‰§è¡Œåˆ é™¤æ“ä½œçš„è¿‡ç¨‹æ˜¯æ¯æ¬¡ä»è¡¨ä¸­åˆ é™¤ä¸€è¡Œï¼Œå¹¶ä¸”åŒæ—¶å°†è¯¥è¡Œçš„åˆ é™¤æ“ä½œä½œä¸ºäº‹åŠ¡è®°å½•åœ¨æ—¥å¿—ä¸­ä¿å­˜ä»¥ä¾¿è¿›è¡Œè¿›è¡Œå›æ»šæ“ä½œ
- **truncateã€drop æ˜¯ DDL(data define language)**ï¼Œåˆ é™¤è¡Œæ˜¯ä¸èƒ½æ¢å¤çš„ï¼Œå¹¶ä¸”åœ¨åˆ é™¤çš„è¿‡ç¨‹ä¸­ä¸ä¼šæ¿€æ´»ä¸è¡¨æœ‰å…³çš„åˆ é™¤è§¦å‘å™¨ï¼Œæ‰§è¡Œé€Ÿåº¦å¿«ï¼ŒåŸæ•°æ®ä¸æ”¾åˆ° rollback segment ä¸­ï¼Œä¸èƒ½å›æ»šã€‚
- **truncate å’Œ drop ä¸æ”¯æŒæ·»åŠ  where æ¡ä»¶ï¼Œè€Œ delete æ”¯æŒ where æ¡ä»¶** 
- æ‰§è¡Œé€Ÿåº¦  **drop > truncate > delete**ï¼Œdelete æ˜¯é€è¡Œæ‰§è¡Œçš„ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œæ—¶ä¼šæŠŠæ“ä½œæ—¥å¿—è®°å½•ä¸‹æ¥ï¼Œä»¥å¤‡æ—¥åå›æ»šä½¿ç”¨ï¼Œæ‰€ä»¥ delete çš„æ‰§è¡Œé€Ÿåº¦æ˜¯æ¯”è¾ƒæ…¢çš„ï¼›è€Œ truncate çš„æ“ä½œæ˜¯å…ˆå¤åˆ¶ä¸€ä¸ªæ–°çš„è¡¨ç»“æ„ï¼Œå†æŠŠåŸå…ˆçš„è¡¨æ•´ä½“åˆ é™¤ï¼Œæ‰€ä»¥å®ƒçš„æ‰§è¡Œé€Ÿåº¦å±…ä¸­ï¼Œè€Œ drop çš„æ‰§è¡Œé€Ÿåº¦æœ€å¿«ã€‚
- truncate åªèƒ½å¯¹ TABLEï¼›delete å¯ä»¥æ˜¯ TABLE å’Œ VIEW

>  **ä½¿ç”¨åœºæ™¯** 
> 
> - å¦‚æœ **æƒ³åˆ é™¤è¡¨ç”¨ drop** 
> - å¦‚æœ **æƒ³ä¿ç•™è¡¨è€Œå°†æ‰€æœ‰æ•°æ®åˆ é™¤ï¼Œå’Œäº‹åŠ¡æ— å…³ï¼Œç”¨ truncate**  å³å¯
> - å¦‚æœ **å’Œäº‹åŠ¡æœ‰å…³ï¼Œæˆ–è€…æƒ³è§¦å‘ triggerï¼Œç”¨ delete** 
> - å¦‚æœæ˜¯æ•´ç†è¡¨å†…éƒ¨çš„ç¢ç‰‡ï¼Œå¯ä»¥ç”¨ truncate è·Ÿä¸Š reuse stroageï¼Œå†é‡æ–°å¯¼å…¥/æ’å…¥æ•°æ®

## MySQL ä¼šå‡ºç°æ­»é”å—ï¼Œå¦‚ä½•é¿å…æ­»é”ï¼Ÿ 

### ä»€ä¹ˆæƒ…å†µå‘ç”Ÿæ­»é”
å¦‚æœ update è¯­å¥çš„ where æ¡ä»¶æ²¡æœ‰ç”¨åˆ°ç´¢å¼•åˆ—ï¼Œé‚£ä¹ˆå°±ä¼šå…¨è¡¨æ‰«æï¼Œåœ¨ä¸€è¡Œè¡Œæ‰«æçš„è¿‡ç¨‹ä¸­ï¼Œä¸ä»…ç»™è¡Œè®°å½•åŠ ä¸Šäº†è¡Œé”ï¼Œè¿˜ç»™è¡Œè®°å½•ä¸¤è¾¹çš„ç©ºéš™ä¹ŸåŠ ä¸Šäº†é—´éš™é”ï¼Œç›¸å½“äºé”ä½æ•´ä¸ªè¡¨ï¼Œç„¶åç›´åˆ°äº‹åŠ¡ç»“æŸæ‰ä¼šé‡Šæ”¾é”ã€‚

è¡Œé”ä¼šå‘ç”Ÿæ­»é”ï¼Œè¡¨é”ä¸ä¼šã€‚æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼š **äº’æ–¥ã€å æœ‰ä¸”ç­‰å¾…ã€ä¸å¯å¼ºå ç”¨ã€å¾ªç¯ç­‰å¾…**ã€‚åªè¦ç³»ç»Ÿå‘ç”Ÿæ­»é”ï¼Œè¿™äº›æ¡ä»¶å¿…ç„¶æˆç«‹ï¼Œä½†æ˜¯åªè¦ç ´åä»»æ„ä¸€ä¸ªæ¡ä»¶å°±æ­»é”å°±ä¸ä¼šæˆç«‹ã€‚

### è§£å†³åŠæ³•ï¼š
- **è®¾ç½®äº‹åŠ¡ç­‰å¾…é”çš„è¶…æ—¶æ—¶é—´**ï¼šå½“ä¸€ä¸ªäº‹åŠ¡çš„ç­‰å¾…æ—¶é—´è¶…è¿‡è¯¥å€¼åï¼Œå°±å¯¹è¿™ä¸ªäº‹åŠ¡è¿›è¡Œå›æ»šï¼Œäºæ˜¯é”å°±é‡Šæ”¾äº†ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡å°±å¯ä»¥ç»§ç»­æ‰§è¡Œäº†ã€‚åœ¨ InnoDB ä¸­ï¼Œå‚æ•°  **innodb_lock_wait_timeout**  æ˜¯ç”¨æ¥è®¾ç½®è¶…æ—¶æ—¶é—´çš„ï¼Œé»˜è®¤å€¼æ—¶ 50 ç§’
- **åº”ç”¨ä¹è§‚é”**ï¼šåœ¨åº”ç”¨å±‚æ§åˆ¶å¹¶å‘æ“ä½œ
- **é¿å…é•¿æŸ¥è¯¢**ï¼šç®€åŒ–äº‹åŠ¡ï¼Œå‡å°‘å¤æ‚æŸ¥è¯¢
- **ä¼˜åŒ–äº‹åŠ¡è®¾è®¡**ï¼šåˆç†é¡ºåºè·å–é”ï¼Œå‡å°‘é”æŒæœ‰æ—¶é—´
- **å¼€å¯ä¸»åŠ¨æ­»é”æ£€æµ‹**ï¼šä¸»åŠ¨æ­»é”æ£€æµ‹åœ¨å‘ç°æ­»é”åï¼Œä¸»åŠ¨å›æ»šæ­»é”é“¾æ¡ä¸­çš„æŸä¸€ä¸ªäº‹åŠ¡ï¼Œè®©å…¶ä»–äº‹åŠ¡å¾—ä»¥ç»§ç»­æ‰§è¡Œã€‚å°†å‚æ•°  **innodb_deadlock_detect**  è®¾ç½®ä¸º onï¼Œè¡¨ç¤ºå¼€å¯è¿™ä¸ªé€»è¾‘ï¼Œé»˜è®¤å°±å¼€å¯ã€‚å½“æ£€æµ‹åˆ°æ­»é”åï¼Œå°±ä¼šå‡ºç°æç¤º

